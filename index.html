
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hourly Chime</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <link rel="stylesheet" href="app.css">
    <script src="./HackTimer.min.js"></script>
    <script type="module">
      import 'https://cdn.jsdelivr.net/npm/@pwabuilder/pwaupdate';
      const el = document.createElement('pwa-update');
      document.body.appendChild(el);
    
    </script>
    <link rel="manifest" href="manifest.json">
</head>
<body onload="getCheckboxValue()">
    <section class="section">
    <div class="container">
        <div class="columns">
            <div class="column is-half is-offset-one-quarter">
                <div class="card">
                  <br>
                    <header class="card-image">
                        <figure class="image is-2by1">
                            <img id="myImage" src="clock.png" alt="clock">
                        </figure>
                        
                        <!-- Buttons -->
                        <br>
                        <input type="checkbox" id="mute" onclick="getCheckboxValue()">Mute</button> 
                        <br>
                        <br>
                        <button class="button" onclick="playSound()">Test Sound</button>
                        <br>
                        <button class="button" onclick="myFunction()">Toggle Dark Mode</button>
                        
                        <!-- Audio -->
                        <script>
                        let playSound = () => new Audio("magic-mallet.mp3").play();
                        </script>

                        <!-- Clock  -->
                        <div id="clock" class="container is-size-1-touch">  
                          <script>                            
                            const clock = () => {
                            const date = new Date();
                            let hrs = date.getHours();
                            let mins = date.getMinutes();
                            let secs = date.getSeconds();
                            let period = "AM";
                            if (hrs == 0) {
                              hrs = 12;
                            } else if (hrs >= 12) {
                              hrs = hrs - 12;
                              period = "PM";
                            }
                            hrs = hrs < 10 ? "0" + hrs : hrs;
                            mins = mins < 10 ? "0" + mins : mins;
                            secs = secs < 10 ? "0" + secs : secs;
                                                
                            let time = `${hrs}:${mins}:${secs}:${period}`;
                            document.getElementById("clock").innerText = time;
                            setTimeout(clock, 1000);
                            };
                            
                          

                            clock();
                            </script>
                          </div>
  
                          <!-- Chime Audio -->
                          <div id="chime">
                          <script>

                            var test = "Yes";
                            function testFunction() {
                              let test = "No";
                              console.log(test);
                            };


                        function getCheckboxValue() {
                          input = document.getElementById("mute");
                          if (input.checked == true) {
                              checked = true; 
                              (console.log(checked));
                          }
                            else {
                              checked = false;
                              (console.log(checked));
                          }
                          };
  
                          
                          var getSecond = window.setInterval(function getSecs() {
                                const seconds = new Date().getSeconds();
                                const minutes = new Date().getMinutes();
                                if (minutes == 00 && seconds == 00 && checked == false){
                                    playSound();
                                    console.log(checked);
                                }
                              }, 1000);
                          </script>
                          </div>


                        <!-- Dark Mode -->
                        <div>
                          <script>
                            function myFunction() {
                               var element = document.body;
                               element.classList.toggle("dark-mode");
                               var image = document.getElementById('myImage');
                                if (image.src.match('darkmodeclock.png')){
                                  image.src = 'clock.png';
                                  }
                                  else {
                                    image.src = 'darkmodeclock.png';
                                  }
                               }
                              
  
                            </script>
                        </div>

        </div>
    </div>
        </div>
    </section>

</body>
</html>